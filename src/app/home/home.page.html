<ion-content>
  <ion-refresher slot="fixed" (ionRefresh)="handleRefresh($event)">
    <ion-refresher-content></ion-refresher-content>
  </ion-refresher>
  <div class="centered-container">
    <div class="centered-content">
      <ion-grid class="grid">
        <ion-row>
          <ion-col size="4">
            <img class="img" src="../../../assets/img/bsa2.png" alt="">
          </ion-col>
          <ion-col size="8" class="tiga">
            <ion-row>
              <ion-col class="empat">
                <!-- <ion-icon class="chat" name="chatbubble-ellipses-outline"></ion-icon> -->
                <ion-icon class="notif" name="notifications-outline"></ion-icon>
                <img class="image" src="../../../assets/img/bsa2.png" alt="">
              </ion-col>
            </ion-row>
          </ion-col>
        </ion-row>
      </ion-grid>
      <p class="halo">Hai <b>{{name}},</b></p>
      <h1>{{ salam }}</h1>
      <div class="container-scroll">
        <div
          class="row carousel-row text-center fw-bold"
          style="font-size: 12px; margin-top: -10%; margin-left: -30px;"
        >
              <img src="https://via.placeholder.com/500" class="img-fluid ms-2" alt="..." style="width: 80%; height: 130px;">
              <img src="https://via.placeholder.com/500" class="img-fluid" alt="..." style="width: 80%; height: 130px;">
              <img src="https://via.placeholder.com/500" class="img-fluid" alt="..." style="width: 80%; height: 130px;">
      </div>
      </div>
    </div>
  </div>
    <div class="row justify-content-center text-center">
      <div class="col-4" (click)="myCourses()">
        <div (click)="myCourses()" class="position-relative">
          <img src="../../../assets/img/kursus_saya.png" alt="">
        </div>
        <p class="mt-2">Kursus Saya</p>
      </div>
      <div class="col-4">
        <div class="position-relative">
          <img src=".../../../assets/img/tips_belajar.png" alt="">
        </div>
        <p class="mt-2">Tips Belajar</p>
      </div>
      <div class="col-4">
        <div class="position-relative">
          <img src="../../../assets/img/tes_kemampuan.png" alt="">
        </div>
        <p class="mt-2">Tes Kemampuan</p>
      </div>
    </div>
  <!-- </div> -->
  <br>
  <P class="title mb-0">Top Pengajar</P>
  <div class="container-scroll mt-0">
    <div
      class="row carousel-row text-center fw-bold"
      style="font-size: 12px;"
    >
    <div class="col" *ngFor="let teacher of topTeachers" (click)="teacherProfile(teacher.teacher_id)" style="display: flex; flex-direction: column; align-items: center;">
      <ion-avatar>
        <img [src]="teacher.profile_picture ? teacher.profile_picture : '../../../assets/img/bsa2.png'" style="width: 50px; height: 50px" class="rounded-circle">
      </ion-avatar>
      <p class="mt-1">{{ teacher.name.length > 12 ? teacher.name.substring(0, 12) + '...' : teacher.name }}</p>
    </div>
    
    </div>
  </div>
  <br>
  <div *ngFor="let group of groupedCourses">
    <p class="title">{{ group.category_name }}</p>
    <div class="container-scroll" style="margin-top: -30px">
      <div class="row carousel-row text-center fw-bold" style="font-size: 12px">
        <div
          class="card m-1 p-0"
          style="height: 200px"
          *ngFor="let course of group.courses"
          (click)="courseDetail(course.course_id)"
        >
          <img
            [src]="course.course_image || 'https://via.placeholder.com/500'"
            class="img-fluid"
            [alt]="course.course_title"
            style="width: 100%; height: 90px; margin-top: 2px"
          />
          <div
            class="card-body p-1"
            style="display: flex; align-items: flex-start"
          >
            <div
              style="
                text-align: left;
                font-size: 10px;
                flex-grow: 1;
                flex-wrap: wrap;
                margin-top: 7px;
              "
            >
              <span
                style="display: block; word-break: break-all; font-size: 12px"
                >{{ course.course_title.length > 29 ?
                course.course_title.substring(0, 29) + '...' :
                course.course_title }}</span
              >
              <span
                style="font-size: 14px; color: {{ course.course_price ? '#8F00FF' : 'green' }}"
                >{{ course.course_price | currencyFormat }} <span style="color:  gray; font-size: 10px; text-decoration: line-through;">{{ course.course_price_discount | currencyFormat }}</span></span
              >
              <span class="mt-1" style="display: block; word-break: break-all">
                {{ course.user_name }}
              </span>
              <div style="display: flex; align-items: center;">
                <span>{{ course.course_rating }} &nbsp;</span>
                <app-star-rating [rating]="course.course_rating || 0"></app-star-rating>
                <span>&nbsp;(245)</span>
              </div>              
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</ion-content>